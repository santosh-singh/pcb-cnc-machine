'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _buildTemplateLiteral = require('./buildTemplateLiteral');

var _buildTemplateLiteral2 = _interopRequireDefault(_buildTemplateLiteral);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var getValue = function getValue(value) {
  if (value.type === 'Literal') {
    return value.value;
  } else if (value.type === 'Identifier') {
    return value.name === "" ? undefined : value.name;
  } else if (value.type === 'JSXElement') {
    return undefined; // For now, just so things don't break.
  }

  var expression = value.expression;

  var type = expression ? expression.type : value.type;
  var obj = expression || value;

  switch (type) {
    case 'Literal':
      return obj.value;
    case 'TemplateLiteral':
      return (0, _buildTemplateLiteral2.default)(obj);
    case 'Identifier':
      return obj.name == 'undefined' ? undefined : obj.name;
    case 'ArrowFunctionExpression':
    case 'FunctionExpression':
      return function () {
        return void 0;
      };
    case 'LogicalExpression':
      var operator = obj.operator;
      var left = obj.left;
      var right = obj.right;

      var leftVal = getValue(left);
      var rightVal = getValue(right);

      return operator == '&&' ? leftVal && rightVal : leftVal || rightVal;
    case 'MemberExpression':
      return getValue(obj.object) + '.' + getValue(obj.property);
    case 'CallExpression':
      return getValue(obj.callee);
    default:
      return undefined;
  }
};

/**
 * Returns the value of a given attribute.
 * Different types of attributes have their associated
 * values in different properties on the object.
 *
 * This function should return the most *closely* associated
 * value with the intention of the JSX.
 */
var getAttributeValue = function getAttributeValue(attribute) {
  if (attribute.value === null) {
    return null;
  } else if (attribute.type === 'JSXAttribute') {
    return getValue(attribute.value);
  }

  return undefined;
};

exports.default = getAttributeValue;